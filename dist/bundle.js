(()=>{"use strict";class e{constructor(e,t,r,n){this.templateEl=document.getElementById(e),this.hostEl=document.getElementById(t);const s=document.importNode(this.templateEl.content,!0);this.el=s.firstElementChild,n&&(this.el.id=n),this.attach(!0)}attach(e){switch(e){case!0:this.hostEl.insertAdjacentElement("afterbegin",this.el);case!1:this.hostEl.insertAdjacentElement("beforeend",this.el)}}}function t(e){let t={valid:!0,message:""};return e.required&&!e.value&&(t={valid:!1,message:"required fields are missing"}),e.minLength&&"string"==typeof e.value&&e.value.trim().length<e.minLength&&(t={valid:!1,message:"input too short"}),e.maxLength&&"string"==typeof e.value&&e.value.trim().length>e.maxLength&&(t={valid:!1,message:"input too long"}),e.min&&"number"==typeof e.value&&e.value<e.min&&(t={valid:!1,message:`minimal value ${e.min} yours ${e.value}`}),e.max&&"number"==typeof e.value&&e.value>e.max&&(t={valid:!1,message:`maximal value ${e.max} yours ${e.value}`}),console.log(t.message),t}function r(e,t,r){const n=r.value;return{configurable:!0,enumerable:!1,get(){return n.bind(this)}}}var n;!function(e){e[e.active=0]="active",e[e.inactive=1]="inactive"}(n||(n={}));class s{constructor(e,t,r,n,s){this.id=e,this.title=t,this.description=r,this.people=n,this.status=s}}class i extends class{constructor(){this.containerArray=[]}addItem(e){this.containerArray.push(e)}}{constructor(){super(),this.projects=[]}static getInstance(){return this.instance?this.instance:this.instance=new i}addProject(e,t,r,i){const a=new s(Math.random().toString(),t,e,r,n.active);this.projects.push(a),this.updateContainer()}transferProject(e,t){const r=this.projects.find((t=>e===t.id));r&&(r.status=t,this.updateContainer())}updateContainer(){for(const e of this.containerArray)e(this.projects.slice())}}!function(e,t,r,n){var s,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,n);else for(var l=e.length-1;l>=0;l--)(s=e[l])&&(a=(i<3?s(a):i>3?s(t,r,a):s(t,r))||a);i>3&&a&&Object.defineProperty(t,r,a)}([r],i.prototype,"updateContainer",null);const a=i.getInstance();var l=function(e,t,r,n){var s,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,n);else for(var l=e.length-1;l>=0;l--)(s=e[l])&&(a=(i<3?s(a):i>3?s(t,r,a):s(t,r))||a);return i>3&&a&&Object.defineProperty(t,r,a),a};let o=class extends e{constructor(){super("project-input","app",!0,"user-input"),this.titleInputEl=this.el.querySelector("#title"),this.descriptionInputEl=this.el.querySelector("#description"),this.peopleInputEl=this.el.querySelector("#people"),this.configure()}configure(){this.el.addEventListener("submit",this.submitHandler)}renderContent(){}gatherInputData(){return 0!==this.titleInputEl.value.trim().length&&0!==this.peopleInputEl.value.trim().length&&0!==this.descriptionInputEl.value.trim().length?[this.titleInputEl.value,this.descriptionInputEl.value,+this.peopleInputEl.value]:console.log("error")}clearInputs(){this.titleInputEl.value="",this.descriptionInputEl.value="",this.peopleInputEl.value=""}submitHandler(e){e.preventDefault();const r=this.gatherInputData();if(Array.isArray(r)){const[e,s,i]=r;t({value:e,required:!0,minLength:5,maxLength:10}).valid&&t({value:s,required:!0,minLength:5,maxLength:25}).valid&&t({value:i,required:!0,min:1,max:5}).valid&&(a.addProject(e,s,i,n.active),this.clearInputs())}}};l([r],o.prototype,"submitHandler",null),o=l([function(e){}],o);const c=o;var d=function(e,t,r,n){var s,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,n);else for(var l=e.length-1;l>=0;l--)(s=e[l])&&(a=(i<3?s(a):i>3?s(t,r,a):s(t,r))||a);return i>3&&a&&Object.defineProperty(t,r,a),a};class u extends e{constructor(e,t){super("single-project",e,!1,t.id),this.project=t,this.configure(),this.renderContent()}get persons(){return 1===this.project.people?"1 person assigned":`${this.project.people} persons assigned`}dragStartHandler(e){e.dataTransfer.setData("text/plain",this.project.id),e.dataTransfer.effectAllowed="move"}dragEndHandler(e){}configure(){this.el.addEventListener("dragstart",this.dragStartHandler),this.el.addEventListener("dragend",this.dragEndHandler)}renderContent(){this.el.querySelector("h2").innerText=this.project.title,this.el.querySelector("h3").innerText=this.project.description,this.el.querySelector("p").innerText=this.persons}}d([r],u.prototype,"dragStartHandler",null),d([r],u.prototype,"dragEndHandler",null);var p=function(e,t,r,n){var s,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,n);else for(var l=e.length-1;l>=0;l--)(s=e[l])&&(a=(i<3?s(a):i>3?s(t,r,a):s(t,r))||a);return i>3&&a&&Object.defineProperty(t,r,a),a};class h extends e{constructor(e){super("project-list","app",!1,`${e}-projects`),this.type=e,this.assignedProjects=[],this.configure(),this.renderContent()}configure(){this.el.addEventListener("dragover",this.dragOverHandler),this.el.addEventListener("dragleave",this.dragLeaveHandler),this.el.addEventListener("drop",this.dropHandler),a.addItem((e=>{const t=e.filter((e=>"active"===this.type?e.status===n.active:e.status===n.inactive));this.assignedProjects=t,this.renderProjects()}))}renderContent(){const e=`${this.type}-projects-list`;this.el.querySelector("ul").id=e,this.el.querySelector("h2").textContent=this.type.toUpperCase()+" PROJECTS"}dragOverHandler(e){e.dataTransfer&&"text/plain"===e.dataTransfer.types[0]&&(e.preventDefault(),this.el.querySelector("ul").classList.add("droppable"))}dragLeaveHandler(e){this.el.querySelector("ul").classList.remove("droppable")}dropHandler(e){var t;this.el.querySelector("ul").classList.remove("droppable"),a.transferProject(null===(t=e.dataTransfer)||void 0===t?void 0:t.getData("text/plain"),"active"===this.type?n.active:n.inactive),this.el.removeEventListener("dragleave",this.dragLeaveHandler),this.el.removeEventListener("drop",this.dropHandler),this.el.removeEventListener("dragover",this.dragOverHandler)}renderProjects(){document.getElementById(`${this.type}-projects-list`).innerHTML="";for(const e of this.assignedProjects)new u(this.el.querySelector("ul").id,e)}}p([r],h.prototype,"dragOverHandler",null),p([r],h.prototype,"dragLeaveHandler",null),p([r],h.prototype,"dropHandler",null),new c,new h("active"),new h("inactive")})();